/* General Body and Layout */
body {
    font-family: 'Roboto', sans-serif;
    margin: 0;
    background-color: #fff;
    color: #343a40;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    position: relative;
    overflow-x: hidden;
}

body::before { /* ADD THIS PSEUDO-ELEMENT */
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, rgba(255, 255, 255, 0) 0%, rgba(224, 230, 237, 0.8) 70%, rgba(190, 200, 210, 0.9) 100%);
    filter: blur(80px); /* Adjust blur intensity */
    z-index: 0; /* Ensures it's behind your content */
    pointer-events: none; /* Allows clicks to pass through */
    opacity: 0.7; /* Adjust overall visibility */
}

h1 {
    font-family: 'Yatra One', cursive;
    text-align: center;
    color: #007bff;
    margin-bottom: 15px;
    font-size: 2.3em;
    font-weight: 800;
}

/* Header Styles */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 30px;
    background-color: #ffffff;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid #e0e0e0;

    z-index: 10;
    position: relative;
}

.logo-placeholder {
    width: 150px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.logo-placeholder img {
    max-height: 100%;
    max-width: 80%;
    object-fit: contain;
}

/* Navigation Buttons */
.nav-buttons {
    display: flex;
    gap: 15px;
}

.nav-btn {
    background-color: #007bff;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 600;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    outline: none;
}

.nav-btn:hover {
    background-color: #0056b3;
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
}

.nav-btn.active {
    background-color: #0056b3;
    font-weight: bold;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    transform: translateY(0);
}

.nav-btn:focus-visible {
    outline: 2px solid #007bff;
    outline-offset: 2px;
}

/* Container for Financial Statement */
.container {
    padding: 30px;
    max-width: 1400px;
    margin: 20px auto;
    position: relative;
    z-index: 5;

    box-shadow: 0 0 100px 50px rgba(0, 0, 0, 0.1) inset;
}

.financial-statement {
    padding: 30px;
    background-color: transparent;
    background-image:
        linear-gradient(to right, rgba(224, 230, 237, 0.8) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(224, 230, 237, 0.8) 1px, transparent 1px);
    background-size: 50px 50px;
    background-attachment: fixed;
    backdrop-filter: blur(5px);
    border-radius: 12px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
    position: relative;
    z-index: 6;

}


.currency-note {
    text-align: center;
    margin-bottom: 25px;
    color: #6c757d;
    font-size: 0.95em;
}

/* KPI Dashboard Styles - Consolidated and Updated */
.kpi-dashboard {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-bottom: 35px;
    padding: 15px 0;
}
.kpi-card {
    background-color: #ffffff;
    border-radius: 10px;
    padding: 18px;
    display: flex;
    align-items: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease;
    position: relative;
    z-index: 1;
}

/* Hover effect for KPI cards */
.kpi-dashboard:hover .kpi-card {
    transform: scale(0.95);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    opacity: 0.7;
}

.kpi-dashboard .kpi-card:hover {
    transform: scale(1.05) translateY(-5px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    opacity: 1;
    z-index: 10;
}

/* Icon specific styling */
.kpi-icon {
    width: 55px;
    height: 55px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
    margin-right: 12px;
    color: white;
    flex-shrink: 0;
}

/* Specific KPI Icon Colors */
.kpi-revenue .kpi-icon { background-color: #007bff; }
.kpi-revenue .kpi-icon i { color: white; }
.kpi-revenue .kpi-value { color: #007bff; }

.kpi-gross-profit .kpi-icon { background-color: #673AB7; }
.kpi-gross-profit .kpi-icon i { color: white; }
.kpi-gross-profit .kpi-value { color: #673AB7; }

.kpi-net-profit-combined .kpi-icon { background-color: #3F51B5; }
.kpi-net-profit-combined .kpi-icon i { color: white; }
.kpi-net-profit-combined .kpi-value { color: #3F51B5; }
.kpi-net-profit-combined .kpi-sub-label {
    font-size: 0.8em;
    margin-top: 5px;
    color: #8c8c8c;
}
.kpi-net-profit-combined .kpi-sub-value {
    font-size: 1.2em;
    font-weight: bold;
    color: #00BCD4;
}

/* Balance Sheet related KPIs */
.kpi-total-insights .kpi-icon { background-color: #E91E63; }
.kpi-total-insights .kpi-icon i { color: white; }
.kpi-total-insights .kpi-value { color: #E91E63; }

.kpi-number-of-location .kpi-icon { background-color: #00BCD4; }
.kpi-number-of-location .kpi-icon i { color: white; }
.kpi-number-of-location .kpi-value { color: #00BCD4; }

.kpi-number-of-plans .kpi-icon { background-color: #07a8ff; }
.kpi-number-of-plans .kpi-icon i { color: white; }
.kpi-number-of-plans .kpi-value { color: #0f9bbe; }

.kpi-total-vendor .kpi-icon { background-color: #9E9E9E; }
.kpi-total-vendor .kpi-icon i { color: white; }
.kpi-total-vendor .kpi-value { color: #9E9E9E; }

.kpi-total-impacts .kpi-icon { background-color: #4d7dc6; }
.kpi-total-impacts .kpi-icon i { color: white; }
.kpi-total-impacts .kpi-value { color: #606c97; }

.kpi-equity .kpi-icon { background-color: #8BC34A; }
.kpi-equity .kpi-icon i { color: white; }
.kpi-equity .kpi-value { color: #8BC34A; }

.kpi-total-liabilities .kpi-icon { background-color: #FF9800; }
.kpi-total-liabilities .kpi-icon i { color: white; }
.kpi-total-liabilities .kpi-value { color: #FF9800; }
.kpi-total-liabilities .kpi-sub-value {
    font-size: 0.9em;
    color: #FF9800;
    margin-left: 5px;
}

.kpi-total-assets .kpi-icon { background-color: #00BCD4; }
.kpi-total-assets .kpi-icon i { color: white; }
.kpi-total-assets .kpi-value { color: #00BCD4; }


.kpi-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
    flex-grow: 1;
}

.kpi-label {
    font-weight: bold;
    font-size: 0.95em;
    color: #6c757d;
    margin-bottom: 5px;
    line-height: 1.2;
}

.kpi-value {
    font-size: 1.7em;
    font-weight: bold;
    color: #343a40;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Table Styles */
table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin-top: 25px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

th, td {
    border: 1px solid #e9ecef;
    padding: 14px 15px;
    text-align: left;
    vertical-align: middle;
}

th {
    background-color: #f8f9fa;
    font-weight: 600;
    color: #495057;
    position: sticky;
    top: 0;
    z-index: 10;
}
th:first-child { border-top-left-radius: 8px; }
th:last-child {
    text-align: center;
    border-top-right-radius: 8px;
}


td {
    color: #495057;
    font-size: 0.95em;
}

/* Styles for color-coding values */
.value-good {
    color: #128712;
    font-weight: 500;
}

.value-bad {
    color: #dc3545;
    font-weight: 500;
}

.value-neutral {
    color: #495057;
}

/* Make clickable insight numbers visually distinct */
.insight-trigger {
    cursor: pointer;
    text-decoration: none;
    color: inherit;
    transition: color 0.2s ease, text-decoration-color 0.2s ease;
    display: inline-flex;
    align-items: baseline;
    white-space: nowrap;
}

.insight-trigger:hover {
    color: #007bff;
    text-decoration: underline dotted #007bff;
}

.data-input {
    width: calc(100% - 10px);
    padding: 8px;
    border: 1px solid #ced4da;
    border-radius: 5px;
    text-align: right;
    font-family: 'Roboto', sans-serif;
    font-size: 0.95em;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
    background-color: #ffffff;
    color: #343a40;
}

.data-input:focus {
    border-color: #007bff;
    outline: 0;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

/* Existing .collapsible styles */
.collapsible {
    cursor: pointer;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0;
    width: 100%;
    color: #212529;
    user-select: none;
    transition: color 0.3s ease;
}

.collapsible:hover {
    color: #128cd7;
}

/* Hide the toggle icon */
.toggle-icon {
    display: none;
}

/* The .explanation styles remain largely the same, but its display will be controlled by JS */
.explanation {
    display: none;
    padding: 10px 0 0 25px;
    color: #6c757d;
    font-style: italic;
    font-size: 0.85em;
    border-left: 3px solid #007bff;
    margin-top: 5px;
    padding-left: 20px;
    line-height: 1.5;
}

tr.section-title td,
tr.category td {
    background-color: #e9ecef;
    font-weight: bold;
    color: #212529;
    border-bottom: 2px solid #ced4da;
    font-size: 1.05em;
    padding-top: 18px;
    padding-bottom: 18px;
}

/* Adjust padding for .collapsible within these cells if needed */
tr.section-title .collapsible,
tr.category .collapsible {
    padding-right: 15px;
}

tr.sub-total td {
    background-color: #f8f9fa;
    font-weight: bold;
    border-top: 1px dashed #dee2e6;
    color: #343a40;
}

tr.grand-total td {
    background-color: #e2e6ea;
    font-weight: bold;
    color: #0056b3;
    border-top: 2px solid #adb5bd;
    font-size: 1.05em;
    padding-top: 18px;
    padding-bottom: 18px;
}

/* Column Widths and Alignment */
td:nth-child(2), /* FY 24-25 */
td:nth-child(3), /* FY 23-24 */
td:nth-child(4), /* FY 22-23 */
td:nth-child(5) { /* FY 21-22 */
    text-align: right;
    width: 14%;
    white-space: nowrap;
    padding-right: 10px;
}

td:first-child { /* PARTICULARS */
    width: auto;
    min-width: 250px;
}

/* Style for the Impact/Percentage column */
th:last-child {
    text-align: center;
    width: 8%;
}

.impact-cell {
    text-align: center;
    font-weight: bold;
    font-size: 0.85em;
    white-space: nowrap;
    color: #6c757d;
}

.impact-cell .percentage {
    display: block;
    margin-top: 2px;
}

/* Last row in table should have rounded bottom corners */
table tbody tr:last-child td:first-child {
    border-bottom-left-radius: 8px;
}
table tbody tr:last-child td:last-child {
    border-bottom-right-radius: 8px;
}

/* Styles for profit/loss classification in tables */
tr.value-good-row td {
    background-color: #f0fff4;
}

tr.value-bad-row td {
    background-color: #fff0f0;
}

/* If you have input fields, and want them to reflect the color */
.data-input.value-good {
    color: #128712;
}

.data-input.value-bad {
    color: #dc3545;
}

/* Style for the navigation button within the explanation */
.explanation .navigate-button {
    display: inline-block;
    margin-left: 10px;
    padding: 5px 10px;
    background-color: #007bff;
    color: white;
    text-decoration: none;
    border-radius: 44px;
    font-size: 0.9em;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
    margin-top: 10px;
}

.explanation .navigate-button:hover {
    background-color: #0056b3;
    transform: translateY(-1px);
}

/* --- Modal/Popup Styles --- */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s ease-out;
}

.modal-content {
    background-color: #ffffff;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
    position: relative;
    width: 90%;
    max-width: 800px;
    height: 80%;
    max-height: 600px;
    display: flex;
    flex-direction: column;
    animation: slideIn 0.3s ease-out;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    border-bottom: 1px solid #e9ecef;
    padding-bottom: 10px;
}

.modal-header h2 {
    margin: 0;
    font-size: 1.5em;
    color: #343a40;
}

.modal-close-btn {
    background: none;
    border: none;
    font-size: 1.8em;
    color: #6c757d;
    cursor: pointer;
    transition: color 0.2s ease;
}

.modal-close-btn:hover {
    color: #dc3545;
}

.modal-iframe-container {
    flex-grow: 1;
    border: 1px solid #e9ecef;
    border-radius: 5px;
    overflow: hidden;
}

.modal-iframe-container iframe {
    width: 100%;
    height: 100%;
    border: none;
    display: block;
    background-color: transparent;
}

/* Animations for modal */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideIn {
    from { transform: translateY(-50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}


/* --- Responsive Adjustments --- */
@media (max-width: 1200px) {
    .container {
        padding: 20px;
        margin: 15px auto;
    }

    .kpi-dashboard {
        justify-content: center;
        gap: 15px;
    }

    .kpi-card {
        padding: 15px;
    }

    .kpi-icon {
        width: 50px;
        height: 50px;
        font-size: 2em;
        margin-right: 10px;
    }

    .kpi-value {
        font-size: 1.6em;
    }

    .modal-content {
        width: 95%;
        max-width: 700px;
        height: 75%;
        max-height: 550px;
    }
}

@media (max-width: 768px) {
    .header {
        flex-direction: column;
        align-items: flex-start;
        padding: 15px 20px;
        gap: 15px;
    }

    .nav-buttons {
        width: 100%;
        justify-content: center;
        gap: 10px;
    }

    .nav-btn {
        padding: 8px 15px;
        font-size: 14px;
        flex-grow: 1;
        text-align: center;
    }

    h1 {
        font-size: 2em;
        margin-bottom: 15px;
    }

    .currency-note {
        font-size: 0.85em;
        margin-bottom: 20px;
    }

    .kpi-dashboard {
        flex-direction: column;
        padding: 0;
    }

    .kpi-card {
        padding: 15px 20px;
    }

    table {
        margin-top: 20px;
        font-size: 0.9em;
    }

    th, td {
        padding: 10px 12px;
    }

    td:first-child {
        min-width: unset;
        width: 60%;
    }
    td:nth-child(2),
    td:nth-child(3),
    td:nth-child(4),
    td:nth-child(5) {
        width: 10%;
    }
    td.impact-cell {
        width: 10%;
    }

    .explanation {
        padding-left: 15px;
    }

    .modal-content {
        width: 98%;
        height: 90%;
        max-height: unset;
    }

    .modal-header h2 {
        font-size: 1.2em;
    }
}


/* Ensure impact column is aligned properly */
td.impact-cell {
    text-align: center;
}

/* Adjust th for the new impact column */
th:last-child {
    text-align: center;
}

/* Color classes for percentages */
.percent-green {
    color: #28a745;
    font-weight: bold;
}
.percent-yellow {
    color: #ffc107;
    font-weight: bold;
}
.percent-orange {
    color: #fd7e14;
    font-weight: bold;
}
.percent-red {
    color: #dc3545;
    font-weight: bold;
}

/* Style for the appended percentage text */
.percentage-impact {
    font-size: 0.85em;
    margin-left: 5px;
}

/* Adjustments for the insight-trigger span */
.insight-trigger {
    display: inline-block;
    text-decoration: none;
    color: inherit;
}



/* --- New Styles for Controls Container --- */
.controls-container {
    display: flex;
    justify-content: space-between; /* Pushes search to left, filters to right */
    align-items: center;
    margin: 20px 0;
    padding: 10px;
    background-color: #f9f9f9;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

#searchInput {
    padding: 8px 12px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1rem;
    width: 300px; /* Adjust width as needed */
    box-sizing: border-box; /* Include padding and border in the element's total width */
}

.year-filter-buttons {
    display: flex;
    gap: 10px; /* Space between buttons */
}

.year-filter-btn {
    padding: 8px 15px;
    border: 1px solid #007bff;
    border-radius: 4px;
    background-color: #fff;
    color: #007bff;
    font-size: 0.9rem;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s, border-color 0.3s;
}

.year-filter-btn:hover {
    background-color: #e9f5ff;
}

.year-filter-btn.active {
    background-color: #007bff;
    color: #fff;
    border-color: #007bff;
}

/* --- Table specific changes for year visibility --- */

/* Hide all year columns and data by default */
.year-column,
.year-data {
    display: none;
}

/* Show only the active year column header */
.year-column.active {
    display: table-cell;
}

/* Show only the active year data cells */
td.year-data.active {
    display: table-cell;
}

/* Ensure the PARTICULARS column remains visible */
table thead tr th:first-child,
table tbody tr td:first-child {
    display: table-cell !important;
}

/* For section titles and categories spanning all columns */
/* Adjust colspan to 2 (1 for Particulars + 1 for active year) */
/* This requires JavaScript to dynamically update the colspan */
.section-title td,
.category td,
.sub-total td:first-child, /* only the description part */
.grand-total td:first-child { /* only the description part */
    /* You might need to adjust colspan dynamically in JS, 
       or use flexbox/grid for these rows if they are complex.
       For a simple display, ensuring they stretch might suffice without specific colspan CSS.
       However, if you want them to literally span the visible columns, JS is needed.
       For now, they should naturally span since their content is within the first td.
    */
    /* If you explicitly set colspan in HTML, you'll need JS to adjust it */
}

/* Ensure sub-total and grand-total value cells are styled */
.sub-total td, .grand-total td {
    font-weight: bold;
    background-color: #eef; /* Light blue background for totals */
}